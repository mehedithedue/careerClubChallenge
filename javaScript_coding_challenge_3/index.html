<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Careerclub | JavaScript Coding Challenge 3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <style>
        
        .big-text {
            font-size: 100px;
        }

        .current-score{
            background: #d9534f;
            color: #fff;
            padding: 10px;
        }
        .current-row{
            margin-top:80px !important;
            padding-bottom:80px;
        }
        .final-score{
            cursor: progress !important;
        }
        .absolute{
            position: absolute;
            width: 100%;
            height: auto;
            bottom: 115px;
        }
        .relative{
            position: relative;
        }
        .win{
            background: #881512 !important;
            color: #fff !important;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <hr>
                <h3 class="text-center">JavaScript Coding Challenge 3</h3>
                <hr>
                <h4>
                    <a href="https://careerclub.net/index.php/challenge/8/JavaScript%2BCoding%2BChallenge%2B3"> Challange Link from careerclub.net</a>
                </h4>
                <h4>GAME RULES:</h4>
                <p>- The game has 2 players, playing in rounds</p>
                <p>- In each turn, a player rolls a dice as many times as he whishes. Each result get added to his ROUND score</p>
                <p>- BUT, if the player rolls a 1, all his ROUND score gets lost. After that, it's the next player's turn</p>
                <p>- The player can choose to 'Hold', which means that his ROUND score gets added to his GLBAL score. After
                    that, it's the next player's turn</p>
                <p>- The first player to reach 100 points on GLOBAL score wins the game</p>
                <hr>
                <div class="row relative">
                    <div class="col-md-6 text-center player1">
                        <div class="row">
                            <h2>Player 1 </h2>
                            <span id="player1-active" class="label">&nbsp;&nbsp;</span>
                            <h1 id="player1-global-score" class="big-text text-danger"></h1>
                        </div>
                        <div class="row current-row">
                            <div class="current-score col-md-4 col-md-offset-4">
                                <p>Current</p>
                                <h1 id="player1-round-score"></h1>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 text-center player2">
                        <div class="row">
                            <h2>Player 2</h2>
                            <span id="player2-active" class="label">&nbsp;&nbsp;</span>
                            <h1 id="player2-global-score" class="big-text text-danger"></h1>
                        </div>
                        <div class="row current-row">
                                <div class="current-score col-md-4 col-md-offset-4">
                                    <p>Current</p>
                                    <h1 id="player2-round-score" ></h1>
                                </div>
                            </div>
                    </div>
                </div>

                <div class="absolute text-center">
                    <p><button id="roll-dice" class="btn btn-default">ROLL DICE</button></p>
                    <p><button id="hold" class="btn btn-default">HOLD</button></p>
                </div>

                <div class="row text-center">
                    <div class="col-md-4 col-md-offset-4">
                        <h4 id="final-score" class="form-control">FINAL SCORE</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>

        var player1 = {};
        player1.roundScore = 0;
        player1.globalScore = 0;
        player1.active = false;

        var player2 = {};
        player2.roundScore = 0;
        player2.globalScore = 0;
        player1.active = true;

        
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function switchPlayer(){
            if(player1.active){

                document.getElementById('player1-active').classList.add("label-danger");
                document.getElementById('player2-active').classList.remove("label-danger");
            }else{

                document.getElementById('player2-active').classList.add("label-danger");
                document.getElementById('player1-active').classList.remove("label-danger");
                
            }
        }

        function showHtmlElement(){

            document.getElementById('player1-round-score').innerHTML = player1.roundScore;
            document.getElementById('player2-round-score').innerHTML = player2.roundScore;

            document.getElementById('player1-global-score').innerHTML = player1.globalScore;
            document.getElementById('player2-global-score').innerHTML = player2.globalScore;
        }

        function gameReset(){
            player1.roundScore = 0;
            player1.globalScore = 0;
            player1.active = false;
            player2.roundScore = 0;
            player2.globalScore = 0;
            player1.active = true;
        }

        function checkWinner(){

            if(player1.globalScore > 100){

                document.querySelector("h4#final-score").classList.add("win");
                document.querySelector("h4#final-score").innerHTML = 'Player 1 is won !'
                gameReset();
            }

            if(player2.globalScore > 100){
            
                document.querySelector("h4#final-score").classList.add("win");
                document.querySelector("h4#final-score").innerHTML = 'Player 2 is won !';
                gameReset();
                
            }

        }


        function rollTheDice(){

            if(player1.active){

                player1.roundScore = getRandomInt(1, 6);

                if(player1.roundScore !== 1){

                    
                    player1.globalScore = player1.globalScore + player1.roundScore 
                }else{

                    player1.globalScore = 0
                    player1.active = false;
                    player2.active = true;

                    switchPlayer();
                }

            }else{

                player2.roundScore = getRandomInt(1, 6);

                if(player2.roundScore !== 1){

                    
                    player2.globalScore = player2.globalScore + player2.roundScore 
                }else{

                    player2.globalScore = 0
                    player2.active = false;
                    player1.active = true;

                    switchPlayer();
                }
                
            }
            
            showHtmlElement();
            checkWinner();

        }

        function holdAndSwitch(){

            if(player1.active){

                player1.active = false;
                player2.active = true;
                
            }else{

                player2.active = false;
                player1.active = true;
            }

            switchPlayer();

        }

        showHtmlElement();
        switchPlayer();

        document.querySelector("button#roll-dice").addEventListener("click", rollTheDice, false);

        document.querySelector("button#hold").addEventListener("click", holdAndSwitch, false);
        

    </script>
</body>

</html>